<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>USS æ–°åŠ å¡ç’°çƒå½±åŸæ”»ç•¥ 2026</title>
    <!-- Tailwind CSS (ç”¨æ–¼å¿«é€Ÿæ¨£å¼) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons (åœ–æ¨™åº«) -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* å°å°å…µé¢¨æ ¼èƒŒæ™¯ */
        body {
            background-color: #fefce8; /* Yellow-50 */
            background-image: 
                radial-gradient(#3b82f6 0.5px, transparent 0.5px), 
                radial-gradient(#3b82f6 0.5px, #fefce8 0.5px);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        /* éš±è—æ»¾å‹•æ¢ä½†ä¿æŒåŠŸèƒ½ */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* Modal å‹•ç•« */
        .modal-enter {
            opacity: 0;
            transform: scale(0.95);
        }
        .modal-enter-active {
            opacity: 1;
            transform: scale(1);
            transition: opacity 300ms, transform 300ms;
        }
        .modal-exit {
            opacity: 0;
            transform: scale(0.95);
            transition: opacity 200ms, transform 200ms;
        }
    </style>
</head>
<body class="text-gray-800 selection:bg-yellow-200">

    <!-- Navbar -->
    <nav class="bg-white sticky top-0 z-50 shadow-md">
        <div class="max-w-6xl mx-auto px-4">
            <div class="flex justify-between items-center h-16">
                <span class="font-bold text-xl text-indigo-700 flex items-center">
                    <span class="bg-indigo-600 text-white p-1 rounded mr-2">USS</span>
                    Guide 2026
                </span>
                <div class="flex space-x-4">
                    <button onclick="switchTab('guide')" id="btn-guide" class="px-3 py-2 rounded-md text-sm font-medium text-indigo-600 bg-indigo-50 transition">
                        æ”»ç•¥æŒ‡å—
                    </button>
                    <button onclick="switchTab('game')" id="btn-game" class="px-3 py-2 rounded-md text-sm font-medium text-gray-500 hover:text-gray-900 transition">
                        æ¨¡æ“¬éŠæˆ²
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content Container -->
    <div class="pb-20 relative">
        
        <!-- GUIDE TAB -->
        <div id="tab-guide">
            <!-- Hero Section -->
            <div class="relative h-96 bg-gradient-to-r from-yellow-400 to-blue-600 text-white overflow-hidden shadow-xl">
                <div class="absolute inset-0 opacity-20 bg-[url('https://images.unsplash.com/photo-1597466599360-3b9775841aec?q=80&w=2000&auto=format&fit=crop')] bg-cover bg-center"></div>
                <div class="absolute inset-0 bg-gradient-to-b from-transparent to-blue-900/80"></div>
                <div class="relative z-10 max-w-6xl mx-auto px-4 h-full flex flex-col justify-center items-start">
                    <div class="bg-yellow-300 text-black font-bold px-3 py-1 rounded-full text-sm mb-4 inline-block animate-bounce shadow-md">
                        2026 å…¨æ–°æ”»ç•¥ç‰ˆ ğŸŒ
                    </div>
                    <h1 class="text-4xl md:text-6xl font-bold mb-4 tracking-tight drop-shadow-md">
                        USS æ–°åŠ å¡ç’°çƒå½±åŸ<br/>
                        <span class="text-yellow-300">æ¥µé™ä¸€æ—¥éŠæŒ‡å—</span>
                    </h1>
                    <p class="text-xl md:text-2xl text-gray-100 max-w-2xl drop-shadow">
                        ç„¡å¿«é€Ÿé€šé—œãƒ»æœ€æ–°å°å°å…µæ¨‚åœ’ãƒ»2026/02/11 å¯¦æˆ°è¨ˆç•«
                    </p>
                    <div class="mt-8 flex gap-4">
                        <a href="#full-guide" class="bg-yellow-400 hover:bg-yellow-300 text-blue-900 font-bold py-3 px-6 rounded-lg transition shadow-lg flex items-center border-2 border-yellow-200">
                            <i data-lucide="map" class="w-5 h-5 mr-2"></i> å…¨åœ’å€æ”»ç•¥
                        </a>
                        <a href="#attractions-list" class="bg-blue-600/80 hover:bg-blue-500/80 backdrop-blur-sm border border-blue-400 text-white font-bold py-3 px-6 rounded-lg transition flex items-center">
                            <i data-lucide="camera" class="w-5 h-5 mr-2"></i> è¨­æ–½åœ–é‘‘
                        </a>
                    </div>
                </div>
            </div>

            <!-- Info Grid -->
            <div class="max-w-6xl mx-auto px-4 -mt-10 relative z-20 grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Time -->
                <div class="bg-white rounded-xl shadow-md p-6 border-l-4 border-indigo-500">
                    <div class="flex items-center mb-4">
                        <div class="p-2 bg-indigo-100 rounded-lg mr-3"><i data-lucide="clock" class="w-6 h-6 text-indigo-600"></i></div>
                        <h3 class="font-bold text-lg text-gray-800">ç‡Ÿæ¥­æ™‚é–“ (2/11)</h3>
                    </div>
                    <p class="text-2xl font-bold text-indigo-900">10:00 - 20:00</p>
                    <p class="text-sm mt-2 text-gray-500">å»ºè­°æŠµé”æ™‚é–“ï¼š<span class="text-red-500 font-bold">09:30</span></p>
                    <p class="text-xs text-gray-400 mt-1">*æ™‚é–“å¯èƒ½è®Šå‹•ï¼Œè«‹ä¸‹è¼‰ App ç¢ºèª</p>
                </div>

                <!-- Ticket -->
                <div class="bg-white rounded-xl shadow-md p-6 border-l-4 border-indigo-500">
                    <div class="flex items-center mb-4">
                        <div class="p-2 bg-indigo-100 rounded-lg mr-3"><i data-lucide="ticket" class="w-6 h-6 text-indigo-600"></i></div>
                        <h3 class="font-bold text-lg text-gray-800">è³¼ç¥¨å„ªæƒ </h3>
                    </div>
                    <p class="mb-3 text-sm text-gray-600">ç¾å ´è³¼ç¥¨è¼ƒè²´ï¼Œå¼·çƒˆå»ºè­°é å…ˆè³¼è²·é›»å­ç¥¨ã€‚</p>
                    <div class="flex flex-col space-y-2">
                        <a href="https://www.klook.com/zh-TW/activity/117-universal-studios-singapore-ticket/" target="_blank" rel="noopener noreferrer" class="block w-full text-center bg-orange-500 hover:bg-orange-600 text-white py-2 rounded text-sm font-bold flex items-center justify-center transition">
                            Klook è³¼ç¥¨ <i data-lucide="chevron-right" class="w-4 h-4 ml-1"></i>
                        </a>
                        <a href="https://www.kkday.com/zh-tw/product/2312" target="_blank" rel="noopener noreferrer" class="block w-full text-center bg-blue-500 hover:bg-blue-600 text-white py-2 rounded text-sm font-bold flex items-center justify-center transition">
                            KKday è³¼ç¥¨ <i data-lucide="chevron-right" class="w-4 h-4 ml-1"></i>
                        </a>
                    </div>
                </div>

                <!-- App -->
                <div class="bg-white rounded-xl shadow-md p-6 border-l-4 border-indigo-500">
                    <div class="flex items-center mb-4">
                        <div class="p-2 bg-indigo-100 rounded-lg mr-3"><i data-lucide="smartphone" class="w-6 h-6 text-indigo-600"></i></div>
                        <h3 class="font-bold text-lg text-gray-800">ä¸‹è¼‰å®˜æ–¹ App</h3>
                    </div>
                    <div class="grid grid-cols-2 gap-3">
                        <div class="flex flex-col items-center p-2 bg-gray-50 rounded-lg border border-gray-100">
                            <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://apps.apple.com/sg/app/universal-studios-singapore/id1462742095" alt="iOS QR" class="w-16 h-16 mb-2 mix-blend-multiply">
                            <a href="https://apps.apple.com/sg/app/universal-studios-singapore/id1462742095" target="_blank" class="text-xs font-bold text-gray-700 hover:text-indigo-600 underline">App Store</a>
                        </div>
                        <div class="flex flex-col items-center p-2 bg-gray-50 rounded-lg border border-gray-100">
                            <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://play.google.com/store/apps/details?id=com.rwsentosa.UniversalSG" alt="Android QR" class="w-16 h-16 mb-2 mix-blend-multiply">
                            <a href="https://play.google.com/store/apps/details?id=com.rwsentosa.UniversalSG" target="_blank" class="text-xs font-bold text-gray-700 hover:text-indigo-600 underline">Google Play</a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Maintenance Alert -->
            <div class="bg-red-50 border-l-4 border-red-500 p-4 my-6 rounded-r-lg shadow-sm mx-4 max-w-6xl md:mx-auto">
                <div class="flex items-start">
                    <i data-lucide="alert-triangle" class="w-6 h-6 text-red-500 mr-3 mt-0.5 flex-shrink-0"></i>
                    <div>
                        <h4 class="font-bold text-red-800 text-lg">è¨­æ–½ç¶­ä¿®è­¦å ± (2026/02/11)</h4>
                        <p class="text-red-700 mt-1">
                            æ ¹æ“šè³‡æ–™ï¼Œ<strong>ã€Œå¤ªç©ºå ¡å£˜å¡æ‹‰ç‹„åŠ  (é›™è»Œéå±±è»Š)ã€</strong> é è¨ˆæ–¼ 1/28 è‡³ 2/14 é€²è¡Œå¹´åº¦ç¶­ä¿®ã€‚
                            <br/>
                            <span class="text-sm mt-1 block">
                                * ä¾ç¾…ç´€æ²³æµæ¢éšªï¼šç¶­ä¿®è‡³ 2/8ï¼Œæ‚¨ 2/11 å‰å¾€æ™‚å·²ç¶“<strong>æ­£å¸¸é–‹æ”¾</strong>ã€‚
                            </span>
                        </p>
                    </div>
                </div>
            </div>

            <!-- Attractions Gallery Section -->
            <div id="attractions-list" class="max-w-6xl mx-auto px-4 mt-12 scroll-mt-24">
                <div class="flex flex-col md:flex-row md:items-center justify-between mb-6">
                    <h2 class="text-3xl font-bold text-gray-900 border-l-4 border-yellow-400 pl-4">
                        å…¨åœ’å€è¨­æ–½åœ–é‘‘
                    </h2>
                    <!-- Filter Buttons -->
                    <div id="zone-filters" class="mt-4 md:mt-0 flex overflow-x-auto pb-2 md:pb-0 space-x-2 no-scrollbar">
                        <!-- JS will populate buttons -->
                    </div>
                </div>
                
                <!-- Cards Grid -->
                <div id="attractions-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                    <!-- JS will populate cards -->
                </div>
            </div>

            <!-- Full Zone Guide Section -->
            <div id="full-guide" class="max-w-6xl mx-auto px-4 mt-16 bg-white/90 backdrop-blur rounded-2xl p-8 shadow-sm">
                <div class="flex flex-col md:flex-row justify-between items-center mb-8">
                    <div>
                        <h2 class="text-3xl font-bold text-indigo-900 flex items-center">
                            <i data-lucide="map" class="w-8 h-8 mr-3 text-indigo-600"></i>
                            ä¸ƒå¤§åœ’å€åœ°åœ– & å‹•ç·šæ”»ç•¥
                        </h2>
                        <p class="text-indigo-600 mt-2">
                            å»ºè­°å…¥åœ’å¾Œæ¡ <span class="font-bold bg-white px-2 py-1 rounded">é€†æ™‚é‡ (å‘å·¦)</span> æ–¹å‘éŠç©ï¼Œå…ˆé¿é–‹æ—©ä¸Šçš„å¥½èŠå¡¢è³¼ç‰©äººæ½®ã€‚
                        </p>
                    </div>
                    <div class="mt-4 md:mt-0 text-sm bg-white px-4 py-2 rounded-full shadow text-indigo-700 font-bold border border-indigo-100">
                        è·¯ç·šï¼šå…¥å£ â†’ å°å°å…µ â†’ é™é ç‹åœ‹ â†’ å¤±è½ä¸–ç•Œ â†’ å¤åŸƒåŠ â†’ ç§‘å¹»åŸå¸‚ â†’ ç´ç´„ â†’ å¥½èŠå¡¢
                    </div>
                </div>

                <!-- Park Map Component -->
                <div class="w-full bg-gray-100 rounded-xl overflow-hidden shadow-lg border border-gray-200 relative group mb-10">
                    <div class="absolute top-4 left-4 z-10 bg-white/95 p-3 rounded-lg shadow-lg border border-gray-200 backdrop-blur-md">
                        <h4 class="font-bold text-indigo-800 flex items-center text-sm mb-1">
                            <i data-lucide="image" class="w-4 h-4 mr-2"></i> åœ’å€åœ°åœ–
                        </h4>
                        <span class="text-xs text-gray-500 block">USS Official Map View</span>
                    </div>
                    
                    <!-- Fallback SVG Map (Hidden by default, shown if image fails) -->
                    <div id="fallback-map" class="hidden w-full h-auto aspect-video bg-blue-50 flex items-center justify-center">
                        <svg viewBox="0 0 800 600" class="w-full h-full" style="max-height:600px;">
                            <rect width="800" height="600" fill="#f0f9ff"/>
                            <path d="M 300 250 Q 400 200 500 250 Q 550 350 400 400 Q 250 350 300 250 Z" fill="#93C5FD" stroke="#3B82F6" stroke-width="2" />
                            <text x="400" y="300" text-anchor="middle" font-size="20" fill="#1e40af">SVG åœ°åœ–é è¦½ (è«‹ç¢ºèªåœ–ç‰‡æª”æ¡ˆå­˜åœ¨)</text>
                            <!-- ç°¡åŒ–ç‰ˆç¤ºæ„åœ–ï¼Œå¯¦éš›åŠŸèƒ½ç”± JS æ§åˆ¶åˆ‡æ› -->
                        </svg>
                    </div>

                    <!-- Image Map -->
                    <img 
                        id="park-map-img"
                        src="uss-park-map-3840x2160-ch-v1.jpg" 
                        alt="æ–°åŠ å¡ç’°çƒå½±åŸåœ’å€åœ°åœ–" 
                        class="w-full h-auto object-cover"
                        onerror="document.getElementById('park-map-img').style.display='none'; document.getElementById('fallback-map').classList.remove('hidden');"
                    />
                    
                    <div class="absolute bottom-0 left-0 right-0 bg-black/60 text-white text-xs p-2 text-center opacity-0 group-hover:opacity-100 transition-opacity">
                        æç¤ºï¼šè‹¥åœ–ç‰‡æœªé¡¯ç¤ºï¼Œè«‹ç¢ºèªæª”æ¡ˆ 'uss-park-map-3840x2160-ch-v1.jpg' ä½æ–¼ç›¸åŒè³‡æ–™å¤¾ä¸­
                    </div>
                </div>

                <!-- Zone Cards Grid -->
                <div id="zones-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                    <!-- JS will populate -->
                </div>
            </div>

            <!-- Strategy Section -->
            <div id="strategy" class="max-w-6xl mx-auto px-4 mt-16 grid grid-cols-1 lg:grid-cols-3 gap-8">
                <div class="lg:col-span-2">
                    <div class="bg-white rounded-xl shadow-lg p-6 md:p-8">
                        <h3 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                            <i data-lucide="clock" class="w-6 h-6 mr-2 text-indigo-600"></i> 
                            2/11 (é€±ä¸‰) ç„¡å¿«é€šæˆ°é¬¥è¡Œç¨‹è¡¨
                        </h3>
                        <div class="relative border-l-2 border-indigo-200 ml-3 space-y-8" id="strategy-timeline">
                            <!-- JS will populate -->
                        </div>
                    </div>
                </div>
                <div class="space-y-6">
                    <!-- Food -->
                    <div class="bg-white rounded-xl shadow-md p-6">
                        <h3 class="text-xl font-bold mb-4 flex items-center text-orange-600">
                            <i data-lucide="coffee" class="mr-2"></i> ç¾é£Ÿæ¨è–¦
                        </h3>
                        <ul class="space-y-4">
                            <li class="border-b pb-2">
                                <span class="font-bold block text-gray-800">é¦¬ä¾†è¥¿äºç¾é£Ÿè¡— (åœ’å¤–)</span>
                                <span class="text-sm text-gray-500">å…¥å£æ—ï¼ŒCP å€¼æœ€é«˜ã€‚æ¨è–¦ï¼šè‚‰éª¨èŒ¶ã€ç‚’ç²¿æ¢ã€‚</span>
                            </li>
                            <li class="border-b pb-2">
                                <span class="font-bold block text-gray-800">Goldilocks (é™é ç‹åœ‹)</span>
                                <span class="text-sm text-gray-500">ç‚¸é›å¥—é¤ï¼Œåœ’å€å…§ç›¸å°å¹³åƒ¹ä¸”å¥½åƒçš„é¸æ“‡ã€‚</span>
                            </li>
                            <li class="pb-2">
                                <span class="font-bold block text-gray-800">å°å°å…µå’–å•¡å»³ (Minion Land)</span>
                                <span class="text-sm text-gray-500">æ‰“å¡å¿…å‚™ï¼å°å°å…µé€ å‹ç”œé»èˆ‡æ¼¢å ¡ã€‚</span>
                            </li>
                        </ul>
                    </div>
                    <!-- Souvenir -->
                    <div class="bg-white rounded-xl shadow-md p-6">
                        <h3 class="text-xl font-bold mb-4 flex items-center text-pink-600">
                            <i data-lucide="shopping-bag" class="mr-2"></i> å¿…è²·ç´€å¿µå“
                        </h3>
                        <ul class="space-y-3 text-sm text-gray-600">
                            <li class="flex items-start"><span class="text-pink-500 mr-2">â—</span>å°å°å…µçˆ†ç±³èŠ±æ¡¶ (æœ€æ–°é€ å‹)</li>
                            <li class="flex items-start"><span class="text-pink-500 mr-2">â—</span>Tim Bear (Bob çš„æ³°è¿ªç†Š)</li>
                            <li class="flex items-start"><span class="text-pink-500 mr-2">â—</span>è®Šå½¢é‡‘å‰›æ°´å£º (å¯¦ç”¨æ´¾)</li>
                            <li class="flex items-start"><span class="text-pink-500 mr-2">â—</span>èŠéº»è¡—é«®ç® (æ‹ç…§å¿…å‚™)</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="max-w-6xl mx-auto px-4 mt-16 mb-8 text-center text-gray-600 text-sm font-medium">
                <p>Designed by AI Guide | è³‡æ–™ä¾†æºï¼šMimiéŸ“ã€Klookã€2Aå¤«å¦»</p>
                <p class="mt-2">ç¥æ‚¨ 2026/02/11 æ—…é€”æ„‰å¿«ï¼</p>
            </div>
        </div>

        <!-- GAME TAB -->
        <div id="tab-game" class="hidden">
            <div class="max-w-4xl mx-auto px-4 mt-10 flex flex-col items-center">
                <h2 class="text-3xl font-bold mb-6 text-gray-800">ç·šä¸Šæ¨¡æ“¬æŒ‘æˆ°</h2>
                <p class="mb-8 text-gray-600 max-w-lg text-center">
                    åœ¨å‰å¾€æ–°åŠ å¡ä¹‹å‰ï¼Œå…ˆä¾†æ¸¬è©¦ä½ çš„åæ‡‰ç¥ç¶“ï¼é€™å°±åƒåœ¨ USS è£¡è¶•å ´ä¸€æ¨£åˆºæ¿€ã€‚
                    æ“ä½œèªªæ˜ï¼šä½¿ç”¨éµç›¤å·¦å³éµæˆ–æ‰‹æŒ‡æ‹–æ›³ï¼Œé–ƒé¿ã€Œç¶­ä¿®æ¨™èªŒã€èˆ‡ã€Œæœ¨ä¹ƒä¼Šã€ï¼Œæ”¶é›†ã€Œé¦™è•‰ã€ï¼
                </p>
                
                <!-- Canvas Game Container -->
                <div class="bg-gray-900 rounded-xl p-4 text-white text-center shadow-2xl border-4 border-yellow-400">
                    <div class="mb-4">
                        <h3 class="text-2xl font-bold text-yellow-400 flex items-center justify-center">
                            <i data-lucide="gamepad-2" class="mr-2"></i> æœ¨ä¹ƒä¼Šæ¥µé€Ÿé€ƒç”Ÿ
                        </h3>
                    </div>
                    <div class="relative mx-auto w-full max-w-[320px] h-[400px] bg-indigo-950 rounded-lg overflow-hidden border-2 border-indigo-700">
                        <canvas id="gameCanvas" width="320" height="400" class="block mx-auto"></canvas>
                        
                        <!-- Start Screen -->
                        <div id="game-start-screen" class="absolute inset-0 flex flex-col items-center justify-center bg-black/70">
                            <button onclick="startGame()" class="bg-yellow-400 hover:bg-yellow-500 text-black font-bold py-3 px-8 rounded-full transform transition hover:scale-105 shadow-lg">
                                é–‹å§‹æŒ‘æˆ°
                            </button>
                            <p class="mt-4 text-xs text-gray-300">é›»è…¦ï¼šå·¦å³éµæ§åˆ¶ / æ‰‹æ©Ÿï¼šè§¸æ§æ‹–æ›³</p>
                        </div>

                        <!-- Game Over Screen -->
                        <div id="game-over-screen" class="hidden absolute inset-0 flex flex-col items-center justify-center bg-black/80">
                            <h4 class="text-3xl font-bold text-red-500 mb-2">GAME OVER</h4>
                            <p class="text-white text-xl mb-4">å¾—åˆ†: <span id="final-score">0</span></p>
                            <button onclick="startGame()" class="bg-white text-black font-bold py-2 px-6 rounded-full hover:bg-gray-200">
                                å†è©¦ä¸€æ¬¡
                            </button>
                        </div>
                        
                        <!-- Score HUD -->
                        <div id="game-hud" class="hidden absolute top-2 left-2 bg-black/50 px-2 py-1 rounded text-yellow-400 font-mono text-sm">
                            SCORE: <span id="current-score">0</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- Floating Info Modal -->
    <div id="info-modal" class="hidden fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm transition-opacity duration-300">
        <div class="bg-white w-full h-[85vh] max-w-5xl rounded-2xl shadow-2xl overflow-hidden flex flex-col relative transform transition-all duration-300 scale-95" id="modal-content">
            <!-- Header -->
            <div class="flex justify-between items-center p-3 px-4 border-b bg-gray-50">
                <div class="flex items-center">
                    <span id="modal-title" class="font-bold text-gray-700">è³‡è¨Šé è¦½</span>
                </div>
                <div class="flex items-center space-x-3">
                    <a id="modal-new-window" href="#" target="_blank" class="px-3 py-1.5 bg-indigo-100 hover:bg-indigo-200 text-indigo-700 rounded-md text-sm font-bold flex items-center transition">
                        <i data-lucide="external-link" class="w-4 h-4 mr-1"></i> é–‹å•Ÿæ–°è¦–çª—
                    </a>
                    <button onclick="closeModal()" class="p-1.5 hover:bg-gray-200 rounded-full text-gray-500 transition">
                        <i data-lucide="x" class="w-6 h-6"></i>
                    </button>
                </div>
            </div>
            <!-- Content -->
            <div class="flex-grow bg-gray-100 relative">
                <iframe id="modal-iframe" src="" class="w-full h-full border-0" allow="geolocation" sandbox="allow-scripts allow-same-origin allow-popups allow-forms"></iframe>
                <!-- Loading Hint -->
                <div class="absolute inset-0 flex flex-col items-center justify-center -z-10">
                    <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mb-2"></div>
                    <p class="text-gray-500 text-sm">æ­£åœ¨è¼‰å…¥è³‡è¨Š...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script>
        // --- Data ---
        const ALL_ATTRACTIONS = [
            { id: 'minion-mayhem', name: 'ç¥å·å¥¶çˆ¸ï¼šå°å°å…µé¬§ç¿»å¤©', zone: 'å°å°å…µæ¨‚åœ’', thrillLevel: 3, description: 'é€²å…¥æ ¼é­¯çš„å¯¦é©—å®¤ï¼Œé«”é©—æ²‰æµ¸å¼ 3D å‹•æ„Ÿä¹˜è»ŠéŠã€‚', tips: 'å…¥åœ’é¦–é¸ï¼æœ€æ–°è¨­æ–½æ’éšŠæœ€ä¹…ã€‚', isOpen: true, type: 'ride', image: 'https://lh3.googleusercontent.com/gg-dl/AOI_d__Glw-yc1P0ZVxGvPrwCTHPOiSh_D6XO3n3kGcBKoUPXxuJpOr5w56FF5F2z2DCSVQ4RrL2Pdwv5azwIMqn0C_3IanLzHQIPJmEgutMSpHllzOyz2kSKBOktHjtrbhCRUMx8fu3XrWgdRqqVyfwICqX7jTQMv5b2nDVxBED_fNH8eZBrA=s1024-rj' },
            { id: 'buggie-boogie', name: 'å°èŸ²èŒèŒè½‰', zone: 'å°å°å…µæ¨‚åœ’', thrillLevel: 2, description: 'å°å°å…µä¸»é¡Œçš„æ—‹è½‰èˆæœƒï¼Œé©åˆè¦ªå­åŒæ¨‚ã€‚', tips: 'é€ å‹éå¸¸å¯æ„›ï¼Œé©åˆæ‹ç…§ã€‚', isOpen: true, type: 'ride' },
            { id: 'silly-swirl', name: 'èŒæ¨‚æ¼©æ¸¦', zone: 'å°å°å…µæ¨‚åœ’', thrillLevel: 2, description: 'è‰²å½©ç¹½ç´›çš„æ—‹è½‰éŠæ¨‚è¨­æ–½ã€‚', tips: 'æ’éšŠæ™‚é–“é€šå¸¸è¼ƒçŸ­ã€‚', isOpen: true, type: 'ride' },
            { id: 'puss', name: 'é‹è²“åŠå®¢æ­·éšªè¨˜', zone: 'é™é ç‹åœ‹', thrillLevel: 3, description: 'æ‡¸åŠå¼éå±±è»Šï¼Œè·Ÿè‘—é‹è²“å°‹æ‰¾é‡‘è›‹ã€‚', tips: 'é›–ç„¶æ˜¯å®¶åº­éå±±è»Šï¼Œä½†æœ‰äº›å¾®é›¢å¿ƒåŠ›ï¼Œå¾ˆå¥½ç©ã€‚', isOpen: true, type: 'ride' },
            { id: 'shrek', name: 'å²ç‘å…‹ 4D å½±é™¢', zone: 'é™é ç‹åœ‹', thrillLevel: 2, description: 'è·Ÿéš¨å²ç‘å…‹ç‡Ÿæ•‘å…¬ä¸»ï¼Œæ„Ÿå—è¦–è¦ºèˆ‡è§¸è¦ºç‰¹æ•ˆã€‚', tips: 'å†·æ°£å¾ˆå¼·ï¼Œé©åˆä¸­åˆé¿æš‘ã€‚', isOpen: true, type: 'show' },
            { id: 'enchanted-airways', name: 'å°é¾é£›è¡Œå­¸æ ¡', zone: 'é™é ç‹åœ‹', thrillLevel: 3, description: 'å°å‹éå±±è»Šï¼Œé©åˆå°æœ‹å‹çš„å…¥é–€æŒ‘æˆ°ã€‚', tips: 'æ’éšŠéšŠä¼ç§»å‹•è¼ƒæ…¢ã€‚', isOpen: true, type: 'ride' },
            { id: 'jurassic-rapids', name: 'ä¾ç¾…ç´€æ²³æµæ¢éšª', zone: 'å¤±è½çš„ä¸–ç•Œ', thrillLevel: 4, description: 'åœ“å½¢æ¼‚æµç­ï¼Œæœ€å¾Œå¾é«˜è™•ä¿¯è¡å…¥æ°´ã€‚', tips: 'å¿…æ¿•ï¼è«‹è‡ªå‚™é›¨è¡£ã€‚(2/11å·²é–‹æ”¾)', isOpen: true, type: 'ride' },
            { id: 'waterworld', name: 'æœªä¾†æ°´ä¸–ç•Œ Show', zone: 'å¤±è½çš„ä¸–ç•Œ', thrillLevel: 5, description: 'å¯¦æ™¯ç‰¹æŠ€è¡¨æ¼”ï¼Œçˆ†ç ´ã€è·³æ°´éå¸¸éœ‡æ’¼ã€‚', tips: 'å…¨æ¿•å€(ç¶ è‰²æ¤…å­)çœŸçš„æœƒå…¨æ¿•ã€‚', isOpen: true, type: 'show' },
            { id: 'canopy-flyer', name: 'å¤©å¹•é£›è¡Œ', zone: 'å¤±è½çš„ä¸–ç•Œ', thrillLevel: 3, description: 'æ‡¸æ›å¼é£›è¡Œè»Šï¼Œä¿¯ç°ä¾ç¾…ç´€åœ’å€ã€‚', tips: 'æ’éšŠæ•ˆç‡ä½ï¼Œè‹¥è¶…é 40 åˆ†é˜å»ºè­°è·³éã€‚', isOpen: true, type: 'ride' },
            { id: 'mummy', name: 'æœ¨ä¹ƒä¼Šå¾©ä»‡è¨˜', zone: 'å¤åŸƒåŠ', thrillLevel: 5, description: 'å®¤å…§é«˜é€Ÿéå±±è»Šï¼Œé»‘æš—ä¸­æ€¥è½‰èˆ‡å€’é€€ã€‚', tips: 'æ¥µè‡´åˆºæ¿€ï¼éœ€å¯„ç‰©ã€‚', isOpen: true, type: 'ride' },
            { id: 'treasure-hunters', name: 'å°‹å¯¶å¥‡å…µ', zone: 'å¤åŸƒåŠ', thrillLevel: 1, description: 'é§•é§›å‰æ™®è»Šçš„æ‚ é–’è»Œé“è»Šã€‚', tips: 'é€Ÿåº¦éå¸¸æ…¢ï¼Œåƒ…é©åˆæ‹ç…§æˆ–å¹¼ç«¥ã€‚', isOpen: true, type: 'ride' },
            { id: 'transformers', name: 'è®Šå½¢é‡‘å‰› 3D å°æ±º', zone: 'ç§‘å¹»åŸå¸‚', thrillLevel: 4, description: '3D æ²‰æµ¸å¼æˆ°é¬¥ï¼Œé«”é©—é«˜ç©ºå¢œè½å¿«æ„Ÿã€‚', tips: 'å‚æ™šäººæ½®è¼ƒå°‘ã€‚', isOpen: true, type: 'ride' },
            { id: 'battlestar-human', name: 'å¤ªç©ºå ¡å£˜ï¼šäººé¡æˆ°éšŠ', zone: 'ç§‘å¹»åŸå¸‚', thrillLevel: 5, description: 'åå¼éå±±è»Šï¼Œç„¡å€’è½‰ä½†é€Ÿåº¦æ¥µå¿«ã€‚', tips: 'âš ï¸ ç¶­ä¿®è­¦å ± (1/28-2/14)ã€‚', isOpen: false, type: 'ride' },
            { id: 'battlestar-cylon', name: 'å¤ªç©ºå ¡å£˜ï¼šæ©Ÿæ¢°æˆ°éšŠ', zone: 'ç§‘å¹»åŸå¸‚', thrillLevel: 5, description: 'æ‡¸æ›å¼éå±±è»Šï¼Œæœ‰å¤šè™•ç¿»è½‰èˆ‡é›¶é‡åŠ›ã€‚', tips: 'âš ï¸ ç¶­ä¿®è­¦å ± (1/28-2/14)ã€‚', isOpen: false, type: 'ride' },
            { id: 'accelerator', name: 'æ—‹è½‰é£›ç›¤', zone: 'ç§‘å¹»åŸå¸‚', thrillLevel: 3, description: 'ç§‘å¹»ç‰ˆçš„å’–å•¡æ¯ã€‚', tips: 'é£¯å¾Œä¸å»ºè­°æ­ä¹˜ã€‚', isOpen: true, type: 'ride' },
            { id: 'sesame-spaghetti', name: 'èŠéº»è¡—ç¾©å¤§åˆ©éºµå¤ªç©ºæˆ°', zone: 'ç´ç´„', thrillLevel: 2, description: 'å®¤å…§æ‡¸æ›æ…¢é€Ÿè»Šï¼Œå ´æ™¯éå¸¸å¯æ„›ã€‚', tips: 'å†·æ°£å¾ˆæ¶¼ï¼Œé©åˆä¼‘æ¯æ‹ç…§ã€‚', isOpen: true, type: 'ride' },
            { id: 'lights-camera', name: 'é›»å½±ç‰¹æ•ˆç‰‡å ´', zone: 'ç´ç´„', thrillLevel: 2, description: 'å²è’‚èŠ¬å²åŒ¹æŸä¸»æŒï¼Œå±•ç¤ºé¢¶é¢¨ç‰¹æ•ˆã€‚', tips: 'ç¬¬ä¸€æ’æœƒè¢«æ°´æ½‘åˆ°ã€‚', isOpen: true, type: 'show' },
            { id: 'hollywood-meet', name: 'å¥½èŠå¡¢æ˜Ÿå…‰å¤§é“', zone: 'å¥½èŠå¡¢', thrillLevel: 1, description: 'å°å°å…µã€åŠŸå¤«ç†Šè²“ç­‰è§’è‰²è¦‹é¢æœƒã€‚', tips: 'è«‹åƒè€ƒ App ä¸Šçš„è¦‹é¢æœƒæ™‚é–“è¡¨ã€‚', isOpen: true, type: 'meet' }
        ];

        const ZONES = [
            { name: '1. å¥½èŠå¡¢', description: 'å…¥åœ’ç¬¬ä¸€ç«™ï¼Œè³¼ç‰©èˆ‡æ˜Ÿå…‰å¤§é“ã€‚', facilities: ['è§’è‰²è¦‹é¢æœƒ', 'Hello Kitty'], dining: ['æ˜Ÿå·´å…‹', 'æ¢…çˆ¾æ–¯å¿«é¤'], shopping: ['ç¦®å“åº—', 'å°å°å…µå°ˆè³£åº—'], strategy: 'å…ˆè¡è¨­æ–½ï¼Œé–‰åœ’å‰å†ä¾†è²·ã€‚' },
            { name: '2. å°å°å…µæ¨‚åœ’', description: '2025 å…¨æ–°é–‹å¹•ï¼å…¥åœ’å·¦æ‰‹é‚Šã€‚', facilities: ['å°å°å…µé¬§ç¿»å¤©', 'èŒæ¨‚æ¼©æ¸¦'], dining: ['å°å°å…µå’–å•¡å»³'], shopping: ['å°å°å…µå¸‚é›†'], strategy: 'æ—©ä¸Š 10:00 ç›´è¡é€™è£¡ï¼' },
            { name: '3. é™é ç‹åœ‹', description: 'å²ç‘å…‹çš„åŸå ¡ç«¥è©±æ°›åœã€‚', facilities: ['å²ç‘å…‹ 4D', 'é‹è²“åŠå®¢'], dining: ['Goldilocks ç‚¸é›'], shopping: ['ç¥ä»™æ•™æ¯å•†åº—'], strategy: 'é©åˆä¸­åˆå¹å†·æ°£ã€‚' },
            { name: '4. å¤±è½çš„ä¸–ç•Œ', description: 'ä¾ç¾…ç´€å…¬åœ’èˆ‡æœªä¾†æ°´ä¸–ç•Œã€‚', facilities: ['æ²³æµæ¢éšª', 'æ°´ä¸–ç•Œè¡¨æ¼”'], dining: ['æ±å—äºç¾é£Ÿ'], shopping: ['ä¾ç¾…ç´€å°ˆè³£åº—'], strategy: 'ä¸‹åˆç©æ°´æ¶ˆæš‘ã€‚' },
            { name: '5. å¤åŸƒåŠ', description: 'ç¥ç¥•å¤æ–‡æ˜èˆ‡æœ¨ä¹ƒä¼Šã€‚', facilities: ['æœ¨ä¹ƒä¼Šå¾©ä»‡è¨˜', 'å°‹å¯¶å¥‡å…µ'], dining: ['ç¶ æ´²é¦™æ–™é¤¨'], shopping: ['å¡ç‰¹å¯¶åº«'], strategy: 'å¿…ç©æœ¨ä¹ƒä¼Šï¼Œéœ€å¯„ç‰©ã€‚' },
            { name: '6. ç§‘å¹»åŸå¸‚', description: 'æœªä¾†æ„Ÿèˆ‡æœ€åˆºæ¿€è¨­æ–½ã€‚', facilities: ['è®Šå½¢é‡‘å‰›', 'å¤ªç©ºå ¡å£˜(ä¿®)'], dining: ['æ˜Ÿéš›æˆ°è»Š'], shopping: ['è®Šå½¢é‡‘å‰›è£å‚™åº«'], strategy: 'è®Šå½¢é‡‘å‰›å‚æ™šäººè¼ƒå°‘ã€‚' },
            { name: '7. ç´ç´„', description: 'ç¶“å…¸ç´ç´„è¡—æ™¯ã€‚', facilities: ['ç‰¹æ•ˆç‰‡å ´', 'èŠéº»è¡—'], dining: ['è·¯æ˜“æŠ«è–©'], shopping: ['å¤§é³¥ç™¾è²¨'], strategy: 'æœ€å¾Œä¸€ç«™æ‹ç…§ã€‚' }
        ];

        const STRATEGY = [
            { time: "09:30", title: "æŠµé”èˆ‡æš–èº«", content: "æŠµé”è–æ·˜æ²™åå‹ä¸–ç•Œï¼Œå…ˆåœ¨é–€å£åœ°çƒå„€æ‹ç…§ã€‚æª¢æŸ¥ App è¨­æ–½é‹ä½œç‹€æ³ã€‚" },
            { time: "10:00", title: "ç¬¬ä¸€ç«™ï¼šå°å°å…µæ¨‚åœ’ (å…¥åœ’å·¦è½‰)", content: "ä¸€é–‹é–€ç›´æ¥å¾€å·¦è¡ï¼å…ˆç©ã€ç¥å·å¥¶çˆ¸ï¼šå°å°å…µé¬§ç¿»å¤©ã€‘ã€‚é€™æ˜¯æœ€æ–°è¨­æ–½ï¼Œäººæ½®ç´¯ç©æœ€å¿«ã€‚" },
            { time: "11:00", title: "ç¬¬äºŒç«™ï¼šå¤åŸƒåŠ (é€†æ™‚é‡ç§»å‹•)", content: "ç¹¼çºŒå¾€å·¦é †è·¯åˆ°å¤åŸƒåŠï¼Œå¯„ç‰©å¾Œç©ã€æœ¨ä¹ƒä¼Šå¾©ä»‡è¨˜ã€‘ã€‚æ­¤æ™‚æ’éšŠç´„ 30 åˆ†å…§ã€‚" },
            { time: "12:00", title: "ä¸­å ´èª¿æ•´ï¼šç§‘å¹»åŸå¸‚/åˆé¤", content: "å‰å¾€ã€ç§‘å¹»åŸå¸‚ã€‘ã€‚è‹¥ã€è®Šå½¢é‡‘å‰›ã€‘æ’éšŠ < 50 åˆ†å‰‡å…ˆç©ï¼Œå¦å‰‡å…ˆå»é¦¬ä¾†è¥¿äºç¾é£Ÿè¡—æˆ–åœ’å…§é¤å»³é¿é–‹ 12:30 å°–å³°ã€‚" },
            { time: "14:00", title: "ç¬¬ä¸‰ç«™ï¼šå¤±è½çš„ä¸–ç•Œ (æ°´ä¸–ç•Œ)", content: "ä¸‹åˆ 1-2 é»é€šå¸¸æœ‰æ°´ä¸–ç•Œè¡¨æ¼”ï¼ˆè«‹ç¢ºèªæ™‚åˆ»è¡¨ï¼‰ã€‚çœ‹å®Œå¾Œç©ã€ä¾ç¾…ç´€æ²³æµæ¢éšªã€‘ï¼ˆå·²é–‹æ”¾ï¼‰ï¼Œå‰›å¥½æ¿•èº«æ¶ˆæš‘ã€‚" },
            { time: "16:00", title: "ç¬¬å››ç«™ï¼šé™é ç‹åœ‹ (ä¼‘æ¯)", content: "åˆ°é™é ç‹åœ‹ç©ã€é‹è²“åŠå®¢ã€‘ï¼Œç´¯äº†å°±é€²ã€å²ç‘å…‹ 4Dã€‘çœ‹é›»å½±å¹å†·æ°£ã€‚" },
            { time: "17:30", title: "ç¬¬äº”ç«™ï¼šè£œæ¼èˆ‡è³¼ç‰©", content: "æŸ¥çœ‹ Appï¼Œè‹¥è®Šå½¢é‡‘å‰›æ™‚é–“ç¸®çŸ­å‰‡å»è£œç©ã€‚æœ€å¾Œå›åˆ°å¥½èŠå¡¢ã€ç´ç´„å€æ‹ç…§ã€è²·ç´€å¿µå“ã€‚" },
            { time: "19:30", title: "é–‰åœ’èˆ‡æ™šé¤", content: "é›¢é–‹åœ’å€ï¼Œå‰å¾€ Vivocity æ€¡è±åŸåƒæ™šé¤ï¼ˆæ¨è–¦æ¾ç™¼è‚‰éª¨èŒ¶æˆ–æµ·é®®ï¼‰ã€‚" }
        ];

        // --- Render Functions ---

        function renderAttractions(filterZone = 'all') {
            const grid = document.getElementById('attractions-grid');
            grid.innerHTML = '';
            
            const filtered = filterZone === 'all' ? ALL_ATTRACTIONS : ALL_ATTRACTIONS.filter(a => a.zone === filterZone);

            filtered.forEach(item => {
                const stars = Array(item.thrillLevel).fill('<i data-lucide="star" class="w-3 h-3 fill-yellow-400 text-yellow-400 inline-block"></i>').join('');
                const maintenanceOverlay = !item.isOpen ? `<div class="absolute inset-0 z-20 bg-gray-900/50 flex items-center justify-center pointer-events-none"><span class="bg-red-600 text-white px-4 py-2 rounded-md font-bold transform -rotate-12 border-2 border-white">ç¶­ä¿®ä¸­</span></div>` : '';
                const grayScale = !item.isOpen ? 'grayscale opacity-70' : '';
                
                // Image handling: Use custom URL if exists, else placeholder
                const imgUrl = item.image || `https://placehold.co/600x400/e2e8f0/1e293b?text=${encodeURIComponent(item.name)}`;
                
                // Map & Image URLs
                const mapUrl = `https://maps.google.com/maps?q=${encodeURIComponent("Universal Studios Singapore " + item.name)}&t=&z=17&ie=UTF8&iwloc=&output=embed`;
                const imgSearchUrl = `https://www.google.com/search?tbm=isch&q=Universal+Studios+Singapore+${encodeURIComponent(item.name)}&igu=1`;

                const cardHtml = `
                    <div class="group relative bg-white rounded-xl shadow-sm hover:shadow-xl transition duration-300 overflow-hidden border border-gray-100 flex flex-col h-full ${grayScale}">
                        ${maintenanceOverlay}
                        <div class="h-40 bg-gray-200 relative overflow-hidden">
                            <img src="${imgUrl}" alt="${item.name}" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500" onerror="this.src='https://placehold.co/600x400?text=No+Image'">
                            <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-3">
                                <span class="text-white text-xs font-bold bg-indigo-600 px-2 py-0.5 rounded shadow">${item.zone}</span>
                            </div>
                        </div>
                        <div class="p-5 flex-grow flex flex-col">
                            <div class="flex justify-between items-start mb-2">
                                <h3 class="text-lg font-bold text-gray-900 leading-tight group-hover:text-indigo-600 transition">${item.name}</h3>
                                <div class="flex flex-shrink-0 ml-2 space-x-0.5">${stars}</div>
                            </div>
                            <p class="text-gray-600 text-sm mb-4 line-clamp-2 flex-grow">${item.description}</p>
                            <div class="grid grid-cols-2 gap-2 mt-auto">
                                <button onclick="openModal('${mapUrl}', 'åœ°åœ–ï¼š${item.name}')" class="flex items-center justify-center px-3 py-2 bg-blue-50 text-blue-600 rounded hover:bg-blue-100 text-xs font-bold transition">
                                    <i data-lucide="map" class="w-3 h-3 mr-1"></i> åœ°åœ–
                                </button>
                                <button onclick="openModal('${imgSearchUrl}', 'åœ–ç‰‡ï¼š${item.name}')" class="flex items-center justify-center px-3 py-2 bg-gray-100 text-gray-600 rounded hover:bg-gray-200 text-xs font-bold transition">
                                    <i data-lucide="camera" class="w-3 h-3 mr-1"></i> åœ–ç‰‡
                                </button>
                            </div>
                            <div class="mt-3 pt-3 border-t border-gray-100">
                                <p class="text-xs text-yellow-800 font-medium flex items-start">
                                    <i data-lucide="info" class="w-3 h-3 mr-1 mt-0.5 flex-shrink-0"></i> ${item.tips}
                                </p>
                            </div>
                        </div>
                    </div>
                `;
                grid.insertAdjacentHTML('beforeend', cardHtml);
            });
            lucide.createIcons();
        }

        function renderZones() {
            const grid = document.getElementById('zones-grid');
            ZONES.forEach(zone => {
                const facHTML = zone.facilities.map(f => `<span class="text-xs bg-indigo-50 text-indigo-700 px-2 py-1 rounded-full">${f}</span>`).join('');
                const diningHTML = zone.dining.map(d => `<li class="truncate">${d}</li>`).join('');
                const shopHTML = zone.shopping.map(s => `<li class="truncate">${s}</li>`).join('');
                
                const html = `
                    <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6 hover:shadow-md transition">
                        <h3 class="text-xl font-bold text-indigo-800 mb-2">${zone.name}</h3>
                        <p class="text-gray-600 text-sm mb-4">${zone.description}</p>
                        <div class="space-y-3">
                            <div>
                                <span class="text-xs font-bold text-gray-500 uppercase flex items-center mb-1"><i data-lucide="star" class="w-3 h-3 mr-1"></i> ç†±é–€è¨­æ–½</span>
                                <div class="flex flex-wrap gap-2">${facHTML}</div>
                            </div>
                            <div class="grid grid-cols-2 gap-2">
                                <div>
                                    <span class="text-xs font-bold text-gray-500 uppercase flex items-center mb-1"><i data-lucide="coffee" class="w-3 h-3 mr-1"></i> é¤é£²</span>
                                    <ul class="text-xs text-gray-600 list-disc list-inside">${diningHTML}</ul>
                                </div>
                                <div>
                                    <span class="text-xs font-bold text-gray-500 uppercase flex items-center mb-1"><i data-lucide="shopping-bag" class="w-3 h-3 mr-1"></i> è³¼ç‰©</span>
                                    <ul class="text-xs text-gray-600 list-disc list-inside">${shopHTML}</ul>
                                </div>
                            </div>
                            <div class="mt-3 bg-yellow-50 p-2 rounded text-xs text-yellow-800 flex items-start">
                                <i data-lucide="navigation" class="w-3 h-3 mr-1 mt-0.5 flex-shrink-0"></i> ${zone.strategy}
                            </div>
                        </div>
                    </div>
                `;
                grid.insertAdjacentHTML('beforeend', html);
            });
        }

        function renderStrategy() {
            const container = document.getElementById('strategy-timeline');
            STRATEGY.forEach((slot, index) => {
                const html = `
                    <div class="relative pl-8">
                        <div class="absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-indigo-600 border-4 border-white shadow-sm"></div>
                        <span class="text-sm font-bold text-indigo-500 mb-1 block">${slot.time}</span>
                        <h4 class="text-lg font-bold text-gray-800">${slot.title}</h4>
                        <p class="text-gray-600 text-sm mt-1">${slot.content}</p>
                    </div>
                `;
                container.insertAdjacentHTML('beforeend', html);
            });
        }

        function renderFilters() {
            const container = document.getElementById('zone-filters');
            const zones = ['all', ...new Set(ALL_ATTRACTIONS.map(a => a.zone))];
            
            zones.forEach(z => {
                const btn = document.createElement('button');
                btn.className = `px-4 py-2 rounded-full text-xs font-bold whitespace-nowrap transition border border-gray-200 ${z === 'all' ? 'bg-indigo-600 text-white shadow-md' : 'bg-white text-gray-600 hover:bg-gray-100'}`;
                btn.innerText = z === 'all' ? 'å…¨éƒ¨é¡¯ç¤º' : z;
                btn.onclick = () => {
                    // Update active state
                    Array.from(container.children).forEach(c => {
                        c.className = 'px-4 py-2 rounded-full text-xs font-bold whitespace-nowrap transition border border-gray-200 bg-white text-gray-600 hover:bg-gray-100';
                    });
                    btn.className = 'px-4 py-2 rounded-full text-xs font-bold whitespace-nowrap transition border border-gray-200 bg-indigo-600 text-white shadow-md';
                    renderAttractions(z);
                };
                container.appendChild(btn);
            });
        }

        // --- Interaction Functions ---

        function switchTab(tabId) {
            const guideContent = document.getElementById('tab-guide');
            const gameContent = document.getElementById('tab-game');
            const btnGuide = document.getElementById('btn-guide');
            const btnGame = document.getElementById('btn-game');

            if (tabId === 'guide') {
                guideContent.classList.remove('hidden');
                gameContent.classList.add('hidden');
                btnGuide.classList.replace('text-gray-500', 'text-indigo-600');
                btnGuide.classList.replace('hover:text-gray-900', 'bg-indigo-50');
                btnGame.classList.replace('text-yellow-600', 'text-gray-500');
                btnGame.classList.replace('bg-yellow-50', 'hover:text-gray-900');
            } else {
                guideContent.classList.add('hidden');
                gameContent.classList.remove('hidden');
                btnGuide.classList.replace('text-indigo-600', 'text-gray-500');
                btnGuide.classList.replace('bg-indigo-50', 'hover:text-gray-900');
                btnGame.classList.replace('text-gray-500', 'text-yellow-600');
                btnGame.classList.replace('hover:text-gray-900', 'bg-yellow-50');
            }
        }

        function openModal(url, title) {
            const modal = document.getElementById('info-modal');
            const iframe = document.getElementById('modal-iframe');
            const titleEl = document.getElementById('modal-title');
            const linkEl = document.getElementById('modal-new-window');
            const content = document.getElementById('modal-content');

            iframe.src = url;
            titleEl.innerText = title;
            // Clean URL for external opening if it's an embed link
            const cleanUrl = url.replace('&output=embed', '');
            linkEl.href = cleanUrl;

            modal.classList.remove('hidden');
            // Animation class
            setTimeout(() => {
                content.classList.remove('scale-95');
                content.classList.add('scale-100');
            }, 10);
        }

        function closeModal() {
            const modal = document.getElementById('info-modal');
            const iframe = document.getElementById('modal-iframe');
            const content = document.getElementById('modal-content');

            content.classList.remove('scale-100');
            content.classList.add('scale-95');
            
            setTimeout(() => {
                modal.classList.add('hidden');
                iframe.src = ''; // Stop video/loading
            }, 200);
        }

        // --- Game Logic ---
        let gameAnimationFrame;
        let isGameRunning = false;
        let score = 0;
        let speed = 5;

        function startGame() {
            const canvas = document.getElementById('gameCanvas');
            const ctx = canvas.getContext('2d');
            
            // Reset state
            isGameRunning = true;
            score = 0;
            speed = 5;
            document.getElementById('game-start-screen').classList.add('hidden');
            document.getElementById('game-over-screen').classList.add('hidden');
            document.getElementById('game-hud').classList.remove('hidden');
            document.getElementById('current-score').innerText = 0;

            let playerX = canvas.width / 2;
            const playerWidth = 30;
            const playerHeight = 50;
            let obstacles = [];
            let frameCount = 0;

            // Input handlers
            function handleKeyDown(e) {
                if (e.key === 'ArrowLeft') playerX -= 20;
                if (e.key === 'ArrowRight') playerX += 20;
                if (playerX < 0) playerX = 0;
                if (playerX > canvas.width - playerWidth) playerX = canvas.width - playerWidth;
            }
            
            // Touch handlers
            function handleTouch(e) {
                e.preventDefault();
                const rect = canvas.getBoundingClientRect();
                const touchX = e.touches[0].clientX - rect.left;
                playerX = touchX - playerWidth / 2;
                if (playerX < 0) playerX = 0;
                if (playerX > canvas.width - playerWidth) playerX = canvas.width - playerWidth;
            }

            window.addEventListener('keydown', handleKeyDown);
            canvas.addEventListener('touchmove', handleTouch, { passive: false });

            function loop() {
                if (!isGameRunning) return;

                frameCount++;
                ctx.fillStyle = '#1e1b4b'; // Dark blue bg
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                // Track
                ctx.strokeStyle = '#312e81';
                ctx.lineWidth = 4;
                ctx.beginPath();
                ctx.moveTo(canvas.width * 0.3, 0);
                ctx.lineTo(canvas.width * 0.3, canvas.height);
                ctx.moveTo(canvas.width * 0.7, 0);
                ctx.lineTo(canvas.width * 0.7, canvas.height);
                ctx.stroke();

                // Spawn logic
                if (frameCount % (60 - Math.min(50, Math.floor(score / 50))) === 0) {
                    const type = Math.random() > 0.8 ? 2 : (Math.random() > 0.5 ? 1 : 0); // 0=mummy, 1=repair, 2=coin
                    const w = 40;
                    const h = 40;
                    const x = Math.random() * (canvas.width - w);
                    obstacles.push({ x, y: -50, type, w, h });
                }

                // Update & Draw Obstacles
                for (let i = obstacles.length - 1; i >= 0; i--) {
                    const obs = obstacles[i];
                    obs.y += speed + (score / 100);

                    // Draw
                    if (obs.type === 2) { // Coin
                        ctx.fillStyle = '#fbbf24';
                        ctx.beginPath();
                        ctx.arc(obs.x + obs.w/2, obs.y + obs.h/2, 15, 0, Math.PI * 2);
                        ctx.fill();
                        ctx.fillStyle = '#000';
                        ctx.font = '20px Arial';
                        ctx.fillText('ğŸŒ', obs.x + 5, obs.y + 28);
                    } else if (obs.type === 1) { // Repair
                        ctx.fillStyle = '#ef4444';
                        ctx.fillRect(obs.x, obs.y, obs.w, obs.h);
                        ctx.fillStyle = '#fff';
                        ctx.font = '10px Arial';
                        ctx.fillText('ç¶­ä¿®', obs.x + 5, obs.y + 25);
                    } else { // Mummy
                        ctx.fillStyle = '#a8a29e';
                        ctx.fillRect(obs.x, obs.y, obs.w, obs.h);
                        ctx.fillStyle = '#000';
                        ctx.fillText('ğŸ§Ÿ', obs.x + 8, obs.y + 28);
                    }

                    // Collision
                    if (
                        playerX < obs.x + obs.w &&
                        playerX + playerWidth > obs.x &&
                        canvas.height - 80 < obs.y + obs.h &&
                        canvas.height - 80 + playerHeight > obs.y
                    ) {
                        if (obs.type === 2) {
                            score += 10;
                            obstacles.splice(i, 1);
                            document.getElementById('current-score').innerText = score;
                        } else {
                            gameOver();
                            return;
                        }
                    }

                    // Cleanup
                    if (obs.y > canvas.height) {
                        obstacles.splice(i, 1);
                        if (obs.type !== 2) {
                            score++;
                            document.getElementById('current-score').innerText = score;
                        }
                    }
                }

                // Draw Player
                ctx.fillStyle = '#3b82f6';
                ctx.fillRect(playerX, canvas.height - 80, playerWidth, playerHeight);
                ctx.fillStyle = '#000';
                ctx.beginPath();
                ctx.arc(playerX - 5, canvas.height - 40, 5, 0, Math.PI * 2);
                ctx.arc(playerX + playerWidth + 5, canvas.height - 40, 5, 0, Math.PI * 2);
                ctx.fill();

                gameAnimationFrame = requestAnimationFrame(loop);
            }

            function gameOver() {
                isGameRunning = false;
                window.removeEventListener('keydown', handleKeyDown);
                canvas.removeEventListener('touchmove', handleTouch);
                cancelAnimationFrame(gameAnimationFrame);
                
                document.getElementById('final-score').innerText = score;
                document.getElementById('game-over-screen').classList.remove('hidden');
                document.getElementById('game-hud').classList.add('hidden');
            }

            loop();
        }

        // --- Init ---
        document.addEventListener('DOMContentLoaded', () => {
            renderAttractions();
            renderZones();
            renderStrategy();
            renderFilters();
            lucide.createIcons();
        });

    </script>
</body>
</html>